function TimSort(a,b){this.a=a,this.c=b,this.minGallop=7,this.stackSize=0;var c=this.a.length;this.tmp=new Array(c<2*TimSort.INITIAL_TMP_STORAGE_LENGTH?c>>>1:TimSort.INITIAL_TMP_STORAGE_LENGTH);var d=120>c?5:1542>c?10:119151>c?19:40;this.runBase=new Array(d),this.runLen=new Array(d)}function setPrefValue(a,b){"undefined"!=typeof localStorage&&(localStorage["pref."+a]=b)}function getPrefValue(a,b){return"undefined"!=typeof localStorage&&"string"==typeof localStorage["pref."+a]?localStorage["pref."+a]:b}jQuery.fn.sortChildren=function(){return function(a,b){for(var c=this.children(),d=function(a,b){this.node=a,this.value=b},e=new Array(c.length),f=0;f<c.length;f++)e[f]=new d(c[f],b(c[f]));TimSort.sort(e,function(b,c){return void 0==b&&void 0==c?0:void 0==b?1:void 0==c?-1:a(b.value,c.value)}),c.detach();for(var f=0;f<e.length;f++)this.append(e[f].node)}}(),TimSort.prototype.pushRun=function(a,b){this.runBase[this.stackSize]=a,this.runLen[this.stackSize]=b,this.stackSize++},TimSort.prototype.mergeCollapse=function(){for(;this.stackSize>1;){var a=this.stackSize-2;if(a>0&&this.runLen[a-1]<=this.runLen[a]+this.runLen[a+1])this.runLen[a-1]<this.runLen[a+1]&&a--,this.mergeAt(a);else{if(!(this.runLen[a]<=this.runLen[a+1]))break;this.mergeAt(a)}}},TimSort.prototype.mergeForceCollapse=function(){for(;this.stackSize>1;){var a=this.stackSize-2;a>0&&this.runLen[a-1]<this.runLen[a+1]&&a--,this.mergeAt(a)}},TimSort.prototype.mergeAt=function(a){var b=this.runBase[a],c=this.runLen[a],d=this.runBase[a+1],e=this.runLen[a+1];this.runLen[a]=c+e,a==this.stackSize-3&&(this.runBase[a+1]=this.runBase[a+2],this.runLen[a+1]=this.runLen[a+2]),this.stackSize--;var f=TimSort.gallopRight(this.a[d],this.a,b,c,0,this.c);b+=f,c-=f,0!=c&&(e=TimSort.gallopLeft(this.a[b+c-1],this.a,d,e,e-1,this.c),0!=e&&(e>=c?this.mergeLo(b,c,d,e):this.mergeHi(b,c,d,e)))},TimSort.prototype.mergeLo=function(a,b,c,d){var e=this.a;this.tmp.length=b,TimSort.arraycopy(e,a,this.tmp,0,b);var f=0,g=c,h=a;if(e[h++]=e[g++],0==--d)return void TimSort.arraycopy(tmp,f,e,h,b);if(1==b)return TimSort.arraycopy(e,g,e,h,d),void(e[h+d]=this.tmp[f]);var i=this.c,j=this.minGallop;a:for(;;){var k=0,l=0;do if(i(e[g],this.tmp[f])<0){if(e[h++]=e[g++],l++,k=0,0==--d)break a}else if(e[h++]=this.tmp[f++],k++,l=0,1==--b)break a;while(j>(k|l));do{if(k=TimSort.gallopRight(e[g],this.tmp,f,b,0,i),0!=k&&(TimSort.arraycopy(this.tmp,f,e,h,k),h+=k,f+=k,b-=k,1>=b))break a;if(e[h++]=e[g++],0==--d)break a;if(l=TimSort.gallopLeft(this.tmp[f],e,g,d,0,i),0!=l&&(TimSort.arraycopy(e,g,e,h,l),h+=l,g+=l,d-=l,0==d))break a;if(e[h++]=this.tmp[f++],1==--b)break a;j--}while(k>=TimSort.MIN_GALLOP|l>=TimSort.MIN_GALLOP);0>j&&(j=0),j+=2}if(this.minGallop=1>j?1:j,1==b)TimSort.arraycopy(e,g,e,h,d),e[h+d]=this.tmp[f];else{if(0==b)throw"IllegalArgumentException Comparison method violates its general contract!";TimSort.arraycopy(this.tmp,f,e,h,b)}},TimSort.prototype.mergeHi=function(a,b,c,d){var e=this.a;this.tmp.length=d,TimSort.arraycopy(e,c,this.tmp,0,d);var f=a+b-1,g=d-1,h=c+d-1;if(e[h--]=e[f--],0==--b)return void TimSort.arraycopy(tmp,0,e,h-(d-1),d);if(1==d)return h-=b,f-=b,TimSort.arraycopy(e,f+1,e,h+1,b),void(e[h]=this.tmp[g]);var i=this.c,j=this.minGallop;a:for(;;){var k=0,l=0;do if(i(this.tmp[g],e[f])<0){if(e[h--]=e[f--],k++,l=0,0==--b)break a}else if(e[h--]=this.tmp[g--],l++,k=0,1==--d)break a;while(j>(k|l));do{if(k=b-TimSort.gallopRight(this.tmp[g],e,a,b,b-1,i),0!=k&&(h-=k,f-=k,b-=k,TimSort.arraycopy(e,f+1,e,h+1,k),0==b))break a;if(e[h--]=this.tmp[g--],1==--d)break a;if(l=d-TimSort.gallopLeft(e[f],this.tmp,0,d,d-1,i),0!=l&&(h-=l,g-=l,d-=l,TimSort.arraycopy(this.tmp,g+1,e,h+1,l),1>=d))break a;if(e[h--]=e[f--],0==--b)break a;j--}while(k>=TimSort.MIN_GALLOP|l>=TimSort.MIN_GALLOP);0>j&&(j=0),j+=2}if(this.minGallop=1>j?1:j,1==d)h-=b,f-=b,TimSort.arraycopy(e,f+1,e,h+1,b),e[h]=this.tmp[g];else{if(0==d)throw"Comparison method violates its general contract!";TimSort.arraycopy(this.tmp,0,e,h-(d-1),d)}},TimSort.MIN_MERGE=32,TimSort.MIN_GALLOP=7,TimSort.INITIAL_TMP_STORAGE_LENGTH=256,TimSort.arraycopy=function(a,b,c,d,e){if(b.length<b||b.length<b+e||c.length<d||c.length<d+e)throw"IndexOutOfBound";if(0!=e)if(d>b)for(var f=b+e-1,g=d+e-1;f>=b;f--,g--)c[g]=a[f];else for(var f=b,g=d;e+b>f;f++,g++)c[g]=a[f]},TimSort.binarySort=function(a,b,c,d,e){for(d==b&&d++;c>d;d++){for(var f=a[d],g=b,h=d;h>g;){var i=g+h>>>1;e(f,a[i])<0?h=i:g=i+1}var j=d-g;switch(j){case 2:a[g+2]=a[g+1];case 1:a[g+1]=a[g];break;default:TimSort.arraycopy(a,g,a,g+1,j)}a[g]=f}},TimSort.countRunAndMakeAscending=function(a,b,c,d){var e=b+1;if(e==c)return 1;if(d(a[e++],a[b])<0){for(;c>e&&d(a[e],a[e-1])<0;)e++;TimSort.reverseRange(a,b,e)}else for(;c>e&&d(a[e],a[e-1])>=0;)e++;return e-b},TimSort.gallopLeft=function(a,b,c,d,e,f){var g=0,h=1;if(f(a,b[c+e])>0){for(var i=d-e;i>h&&f(a,b[c+e+h])>0;)g=h,h=(h<<1)+1,0>=h&&(h=i);h>i&&(h=i),g+=e,h+=e}else{for(var i=e+1;i>h&&f(a,b[c+e-h])<=0;)g=h,h=(h<<1)+1,0>=h&&(h=i);h>i&&(h=i);var j=g;g=e-h,h=e-j}for(g++;h>g;){var k=g+(h-g>>>1);f(a,b[c+k])>0?g=k+1:h=k}return h},TimSort.gallopRight=function(a,b,c,d,e,f){var g=1,h=0;if(f(a,b[c+e])<0){for(var i=e+1;i>g&&f(a,b[c+e-g])<0;)h=g,g=(g<<1)+1,0>=g&&(g=i);g>i&&(g=i);var j=h;h=e-g,g=e-j}else{for(var i=d-e;i>g&&f(a,b[c+e+g])>=0;)h=g,g=(g<<1)+1,0>=g&&(g=i);g>i&&(g=i),h+=e,g+=e}for(h++;g>h;){var k=h+(g-h>>>1);f(a,b[c+k])<0?g=k:h=k+1}return g},TimSort.minRunLength=function(a){for(var b=0;a>=TimSort.MIN_MERGE;)b|=1&a,a>>=1;return a+b},TimSort.rangeCheck=function(a,b,c){if(b>c)throw"IllegalArgumentException fromIndex"+b+"> toIndex"+c;if(0>b)throw"ArrayIndexOutOfBoundsException "+b;if(c>a)throw"ArrayIndexOutOfBoundsException "+c},TimSort.reverseRange=function(a,b,c){for(c--;c>b;){var d=a[b];a[b++]=a[c],a[c--]=d}},TimSort.sort=function(a,b){return b||(b=function(a,b){return b>a?-1:a>b?1:0}),TimSort.sort1(a,0,a.length,b),a},TimSort.sort1=function(a,b,c,d){TimSort.rangeCheck(a.length,b,c);var e=c-b;if(!(2>e)){if(e<TimSort.MIN_MERGE){var f=TimSort.countRunAndMakeAscending(a,b,c,d);return void TimSort.binarySort(a,b,c,b+f,d)}var g=new TimSort(a,d),h=TimSort.minRunLength(e);do{var i=TimSort.countRunAndMakeAscending(a,b,c,d);if(h>i){var j=h>=e?e:h;TimSort.binarySort(a,b,b+j,b+i,d),i=j}g.pushRun(b,i),g.mergeCollapse(),b+=i,e-=i}while(0!=e);g.mergeForceCollapse()}};var Comparators=function(){};Comparators.naturalComparator=function(a,b){if(typeof a!=typeof b)throw"Datatype can't be compare: "+a+" ~ "+b;return a>b?1:b>a?-1:0},Comparators.naturalStrComparator=function(a,b){return a=String(a),b=String(b),a>b?1:b>a?-1:0},Comparators.naturalIntComparator=function(a,b){return a=parseInt(a),b=parseInt(b),a>b?1:b>a?-1:0},$("table.sortable thead th.sortable").each(function(){var a=$(this),b=a.index(),c="asc",d=a.parents("table");fctsort=function(){var e=Comparators.naturalComparator;"int"==a.attr("data-type")?e=Comparators.naturalIntComparator:"str"==a.attr("data-type")?e=Comparators.naturalStrComparator:"dir"==a.attr("data-type")&&(e=function(a,b){return a=String(a),b=String(b),aIsDir=a.indexOf("dir-"),bIsDir=b.indexOf("dir-"),bIsDir>aIsDir?1:aIsDir>bIsDir?-1:a>b?1:b>a?-1:0}),d.find("tbody").sortChildren(function(a,b){return"asc"==c?e(a,b):-e(a,b)},function(a){var c=$(a.children[b]),d=c.attr("data-value");return null===d&&(d=$.text([c])),isNaN(parseInt(d))?d.toLowerCase():parseInt(d)}),d.find("thead th.sortable").removeClass("desc asc"),a.addClass(c),""!==d.attr("id")&&""!==a.attr("id")&&(setPrefValue(d.attr("id")+".sortingcolumn",a.attr("id")),setPrefValue(d.attr("id")+".sortingdirection",c)),c="asc"==c?"desc":"asc"},a.wrapInner('<a href="#"/>'),a.children("a").click(fctsort),getPrefValue(d.attr("id")+".sortingcolumn","")==a.attr("id")&&(c=getPrefValue(d.attr("id")+".sortingdirection",c),"asc"==c?fctsort():(c="desc",fctsort()))}),$(function(){$("button[data-confirm]").click(function(){var a=$(this).attr("data-target");if(form=a?$(a):$(this).closest("form"),!form.length)return!1;var b=$(this).attr("data-confirm"),c=$("#data-confirm-modal");return c.length?(c.find(".modal-body").text(b),c.find("button[type=submit]").click(function(){return form.submit(),!1}),c.modal({show:!0})):confirm(b)&&form.submit(),!1})});